{% extends '/admin/base.html.twig' %}

{% block content %}
    {{ form_start(form) }}
    <!-- Content Row -->
    <div class="row">
        <div class="col-9">
            {% if form_errors(form) %}
                <div class="alert alert-danger" role="alert">
                    {{ form_errors(form) }}
                </div>
            {% endif %}
            <div class="row border-bottom rounded py-4 bg-white">
                <div class="col-3">
                    {{ form.name.vars.label }}
                </div>
                <div class="col-6" id="name-value" >
                    {{ form.name.vars.value }}
                </div>
                <div class="col-6" id="name-input" hidden >
                    {{ form_widget(form.name) }}
                </div>
                <div class="col-2">
                    <span class="material-icons-outlined edit pointer" id="name-edit">
                    edit
                    </span>
                    {{ form_widget(form.save, { 'attr': {'class': 'btn btn-primary save-button float-end','hidden':true} }) }}
                </div>
            </div>
            <div class="row py-4 rounded bg-white">
                <div class="col-3">
                    {{ form.email.vars.label }}
                </div>
                <div class="col-6" id="email-value">
                    {{ form.email.vars.value }}
                </div>
                <div class="col-6" id="email-input" hidden>
                    {{ form_widget(form.email) }}
                </div>
                <div class="col-2">
                    <span class="material-icons-outlined edit pointer" id="email-edit">
                    edit
                    </span>
                    {{ form_widget(form.save1, { 'attr': {'class': 'btn btn-primary save-button float-end','hidden':true} }) }}
                </div>
            </div>
        </div>
    </div>
    {{ form_end(form) }}
    {{ form_start(form_password) }}
    <div class="row mt-4">
        <div class="col-9">
            <div class="row border-bottom rounded py-4 bg-white">
                <div class="col-3">
                    Connexion
                </div>
            </div>
            <div class="row border-bottom rounded py-4 bg-white">
                {% if form_errors(form_password) %}
                    <div class="alert alert-danger" role="alert">
                        {{ form_errors(form_password) }}
                    </div>
                {% endif %}
                <div class="row" id="password-label">
                    <div class="col-10">
                        Changer le mot de passe
                    </div>
                    <div class="col-2">
                    <span class="material-icons-outlined edit pointer" id="password-edit" >
                    edit
                    </span>
                    </div>
                </div>
                <div class="col-9" id="password-form" hidden>
                    <div class="form-group">
                        <label > Ancien mot de passe</label>
                        {{ form_widget(form_password.password, { 'attr': {'class': 'form-control-lg form-control mt-3 ms-5'} }) }}
                    </div>
                    <div class="form-group mt-4">
                        <label> Nouveau mot de passe</label>
                        {{ form_widget(form_password.new.first, { 'attr': {'class': 'form-control-lg form-control mt-3 ms-5'} }) }}
                    </div>
                    <div class="form-group mt-4 mb-4">
                        <label> Confirmer mot de passe</label>
                        {{ form_widget(form_password.new.second, { 'attr': {'class': 'form-control-lg form-control mt-3 ms-5'} }) }}
                    </div>
                    {{ form_widget(form_password.save, { 'attr': {'class': 'btn btn-primary save-button float-end'} }) }}
                    <button class="btn btn-primary save-button float-end me-1" id="cancel-button">Annuler</button>
                </div>
            </div>
        </div>
    </div>
    {{ form_end(form_password) }}
{% endblock %}

{% block documentReady %}
<script>
    $(document).ready(function() {
        $('#name-edit').click(function () {
            $('#name-value').attr('hidden', true);
            $('#name-input').attr('hidden', false);
            $('#user_name').focus();
            $('#name-edit').attr('hidden', true);
            $('#user_save').attr('hidden', false);
        });

        $("#user_name").focusout(function() {
            $('#name-value').attr('hidden', false);
            $('#name-input').attr('hidden', true);
            $('#name-edit').attr('hidden', false);
            $('#user_save').attr('hidden', true);
        });

        $('#email-edit').click(function () {
            $('#email-value').attr('hidden', true);
            $('#email-input').attr('hidden', false);
            $('#user_email').focus();
            $('#email-edit').attr('hidden', true);
            $('#user_save1').attr('hidden', false);
        });

        $("#user_email").focusout(function() {
            $('#email-value').attr('hidden', false);
            $('#email-input').attr('hidden', true);
            $('#email-edit').attr('hidden', false);
            $('#user_save1').attr('hidden', true);
        });

        $('#password-edit').click(function () {
            $('#password-form').attr('hidden', false);
            $('#password-label').attr('hidden', true);
        });

        $('#cancel-button').click(function () {
            $('#password-form').attr('hidden', true);
            $('#password-label').attr('hidden', false);
        });
    });
</script>
{% endblock %}